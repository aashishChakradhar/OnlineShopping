# to create teacher    
    if request.user.is_superuser:
        if request.method == "POST":
            try:
                username = request.POST.get('username')
                password = request.POST.get('password')
                email = request.POST.get('email')
                firstName = request.POST.get('firstName')
                lastName = request.POST.get('lastName')
                is_superuser = bool(request.POST.get('is_superuser'))
                
                # check validation
                if(not check.valid_name(firstName)):
                    raise ValueError("Error: Invalid First Name")
                if(not check.valid_name(lastName)):
                    raise ValueError("Error: Invalid Last Name")
                if(not check.valid_email(email)):
                    raise ValueError("Error: Invalid Email")
                if(not check.valid_username(username)):
                    raise ValueError("Error: Invalid Username")

                # creating superuser
                user = User.objects.create_user(username,email,password,is_superuser=is_superuser)
                if is_superuser:
                    user.is_staff = True  # Optionally, make the user staff as well
                user.save()
                # additional user details
                user.first_name=firstName
                user.last_name=lastName
                user.save()
                if(is_superuser):messages.success(request, "Admin Created Successfully")
                elif(not is_superuser):messages.success(request, "User Created Successfully")
            except ValueError as e:
                messages.error(request,str(e))
            except Exception as e:
                messages.error(request, "An error occurred during signup. Please try again.")
            return render (request,"create_superuser.html")
        else:
            return render (request,"create_user.html")
    else:
        return render(request,"/")